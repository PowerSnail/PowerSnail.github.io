<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-security-policy content="default-src 'self'; img-src 'self' https://snailshell.goatcounter.com/count https://mirrors.creativecommons.org/; style-src 'self' 'unsafe-inline'"><meta http-equiv=content-type content="text/html;charset=utf-8;x-content-type-options=nosniff"><meta name=author content="PowerSnail"><meta name=generator content="Hugo 0.101.0"><meta name=theme-color content="#af3000"><title>A Constant Solution to Code-Fights Apple Boxes Problem Â· SnailShell</title><link rel=stylesheet href=https://powersnail.com/style.css><link rel=canonical href=https://powersnail.com/2017/apple-box/><link rel="shortcut icon" sizes=any href=/images/snail.svg type=image/svg+xml><link rel=icon sizes=any href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/snail-180x180.png><link rel=mask-icon href=/images/snail.svg color=#af3000><script type=text/javascript id=MathJax-script src=/js/bundle.cc6d92b034817d3a3e6e3835b40e09bd99b88fcbe2b160a0dd4220b82b21c3cc.js defer></script></head><body><header><div class=site-title><a href=https://powersnail.com/>SnailShell</a></div><nav><a type=button href=/posts/>Posts</a>
<a type=button href=/status/>Status</a>
<a type=button href=/about/>About</a></nav></header><img class=goatcounter alt width=1 height=1 src="https://snailshell.goatcounter.com/count?p=%2f2017%2fapple-box%2f&t=A%20Constant%20Solution%20to%20Code-Fights%20Apple%20Boxes%20Problem"><main><article><header><h1>A Constant Solution to Code-Fights Apple Boxes Problem</h1><hr><div class=metadata><span class="icon-prefix calendar-event">2017-01-06</span>
<span class="icon-prefix calculator">303 words</span>
<span class="icon-prefix clock">2 minutes read</span><div class=tag-list><a class="icon-prefix tags tag" href=/tags/computer-science>computer science</a> <a class="icon-prefix tags tag" href=/tags/algorithm>algorithm</a> <a class="icon-prefix tags tag" href=/tags/codefights>codefights</a> <a class="icon-prefix tags tag" href=/tags/c++>C++</a></div></div></header><h2 id=the-apple-boxes-problem>The Apple Boxes Problem</h2><p>The problem can be simply put:</p><blockquote><p>Input: $k$</p><p>Output: let $r$ be the sum of the square of each <em>even</em> integer no larger than $k$, and $y$ be that of the <em>odd</em>. Return $r - y$.</p></blockquote><h2 id=the-naive-solution>The Naive Solution</h2><p>We can loop through 1 to $k$, alternating between adding and subtracting.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>val</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>[</span><span class=mf>1.</span><span class=o>.</span><span class=n>k</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>i</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=n>val</span> <span class=o>+=</span> <span class=n>i</span> <span class=o>*</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>val</span> <span class=o>-=</span> <span class=n>i</span> <span class=o>*</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>val</span>
</span></span></code></pre></div><p>There could be various optimizations, but nevertheless, the algorithm is linear with regard to $k$.</p><h2 id=constant-solution>Constant Solution</h2><p>First, assume $k$ is even, so that we can perfectly pair up terms in $r$ and $y$. Observe that each pair is in the form of $x^2 - (x - 1)^2$. This can be transformed to $(x + x - 1)\cdot(x - x + 1) = (x - 1) + x$. When we add all pairs, it becomes a simple series: $1 + 2 + 3 + &mldr; + k$. For example, for $k = 6$:</p><p>$$
\begin{align*}
r &= 2^2 + 4^2 + 6^2 \\
y &= 1^2 + 3^2 + 5^2 \\
r - y &= (2^2 + 4^2 + 6^2) - (1^2 + 3^2 + 5^2) \\
&= (2^2 - 1^2) + (4^2 - 2^2) + (6^2 - 5^2) \\
&= 1 + 2 + 3 + 4 + 5 + 6 \\
&= \dfrac{6(1 + 6)}{2} \\
&= 21
\end{align*}
$$</p><p>Thus, we can return $\dfrac{k(1 + k)}{2}$ for arbitrary <em>even</em> $k$.</p><p>What about <em>odd</em> $k$? We can adjust the pairing a bit, and easily find that now we have $-\dfrac{k(1 + k)}{2}$.</p><h2 id=c-source-code>C++ Source Code</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>int</span> <span class=nf>appleBoxes</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span>  <span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=n>k</span><span class=p>)</span> <span class=o>*</span> <span class=n>k</span> <span class=o>/</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=n>k</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=nl>sum</span> <span class=p>:</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><footer><p id=cc>This work is licensed under
<a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0
<img alt="Creative Commons License CC BY-SA 4.0" src=/images/cc-all.svg style=height:1.2em;width:auto loading=lazy width=29.633333 height=10.583333></a></p></footer></article></main><footer><nav><a href=https://gohugo.io/>This blog is Powered by Hugo</a>
<a class="icon-prefix rss" href=/index.xml class=social-rss>RSS</a>
<a class="icon-prefix brand-github" href=https://github.com/PowerSnail/>Github</a>
<a class="icon-prefix mail" href=mailto:hj@powersnail.com>hj@powersnail.com</a></nav><div>Copyright @ PowerSnail 2016-2022</div></footer></body></html>