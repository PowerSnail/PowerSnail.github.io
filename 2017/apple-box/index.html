<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-security-policy content="default-src 'self'; img-src 'self' https://snailshell.goatcounter.com/count https://mirrors.creativecommons.org/; style-src 'self' 'unsafe-inline'"><meta http-equiv=content-type content="text/html;charset=utf-8;x-content-type-options=nosniff"><meta name=author content="PowerSnail"><meta name=generator content="Hugo 0.101.0"><meta name=theme-color content="#af3000"><title>A Constant Solution to Code-Fights Apple Boxes Problem Â· SnailShell</title><link rel=stylesheet href=https://powersnail.com/style.css><link rel=canonical href=https://powersnail.com/2017/apple-box/><link rel="shortcut icon" sizes=any href=/images/snail.svg type=image/svg+xml><link rel=icon sizes=any href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/images/snail-180x180.png><link rel=mask-icon href=/images/snail.svg color=#af3000><script type=text/javascript id=MathJax-script src=/js/bundle.cc6d92b034817d3a3e6e3835b40e09bd99b88fcbe2b160a0dd4220b82b21c3cc.js defer></script></head><body><header><div class=site-title><a href=https://powersnail.com/>SnailShell</a></div><nav><a type=button href=/posts/>Posts</a>
<a type=button href=/status/>Status</a>
<a type=button href=/about/>About</a></nav></header><img class=goatcounter alt width=1 height=1 src="https://snailshell.goatcounter.com/count?p=%2f2017%2fapple-box%2f&t=A%20Constant%20Solution%20to%20Code-Fights%20Apple%20Boxes%20Problem"><main><article><header><h1>A Constant Solution to Code-Fights Apple Boxes Problem</h1><hr><div id=metadata><details><summary><label><svg xmlns="http://www.w3.org/2000/svg" alt="Tags" class="icon icon-tabler icon-tabler-tags" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7.859 6H5.025A2.025 2.025.0 003 8.025v2.834c0 .537.213 1.052.593 1.432l6.116 6.116a2.025 2.025.0 002.864.0l2.834-2.834a2.025 2.025.0 000-2.864L9.29 6.593A2.025 2.025.0 007.859 6z"/><path d="M17.573 18.407l2.834-2.834a2.025 2.025.0 000-2.864L13.29 5.593"/><path d="M6 9h-.01"/></svg></label>Tags</summary><div class=tag-list><a class=tag href=/tags/computer-science>computer science</a> <a class=tag href=/tags/algorithm>algorithm</a> <a class=tag href=/tags/codefights>codefights</a> <a class=tag href=/tags/c++>C++</a></div></details><span><label><svg xmlns="http://www.w3.org/2000/svg" alt="Published on" class="icon icon-tabler icon-tabler-calendar-event" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="5" width="16" height="16" rx="2"/><line x1="16" y1="3" x2="16" y2="7"/><line x1="8" y1="3" x2="8" y2="7"/><line x1="4" y1="11" x2="20" y2="11"/><rect x="8" y="15" width="2" height="2"/></svg></label>2017-01-06</span>
<span><label><svg xmlns="http://www.w3.org/2000/svg" alt="Word count" class="icon icon-tabler icon-tabler-calculator" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="4" y="3" width="16" height="18" rx="2"/><rect x="8" y="7" width="8" height="3" rx="1"/><line x1="8" y1="14" x2="8" y2="14.01"/><line x1="12" y1="14" x2="12" y2="14.01"/><line x1="16" y1="14" x2="16" y2="14.01"/><line x1="8" y1="17" x2="8" y2="17.01"/><line x1="12" y1="17" x2="12" y2="17.01"/><line x1="16" y1="17" x2="16" y2="17.01"/></svg></label>315 words</span>
<span><label><svg xmlns="http://www.w3.org/2000/svg" alt="Reading time" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg></label>2 minutes read</span></div></header><h2 id=the-apple-boxes-problem>The Apple Boxes Problem</h2><p>The problem can be simply put:</p><blockquote><p>Input: $k$</p><p>Output: let $r$ be the sum of the square of each <em>even</em> integer no larger than $k$, and $y$ be that of the <em>odd</em>. Return $r - y$.</p></blockquote><h2 id=the-naive-solution>The Naive Solution</h2><p>We can loop through 1 to $k$, alternating between adding and subtracting.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>val</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=p>[</span><span class=mf>1.</span><span class=o>.</span><span class=n>k</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>i</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=n>val</span> <span class=o>+=</span> <span class=n>i</span> <span class=o>*</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>        <span class=n>val</span> <span class=o>-=</span> <span class=n>i</span> <span class=o>*</span> <span class=n>i</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>return</span> <span class=n>val</span></span></span></code></pre></td></tr></table></div></div><p>There could be various optimizations, but nevertheless, the algorithm is linear with regard to $k$.</p><h2 id=constant-solution>Constant Solution</h2><p>First, assume $k$ is even, so that we can perfectly pair up terms in $r$ and $y$. Observe that each pair is in the form of $x^2 - (x - 1)^2$. This can be transformed to $(x + x - 1)\cdot(x - x + 1) = (x - 1) + x$. When we add all pairs, it becomes a simple series: $1 + 2 + 3 + &mldr; + k$. For example, for $k = 6$:</p><p>$$
\begin{align*}
r &= 2^2 + 4^2 + 6^2 \\
y &= 1^2 + 3^2 + 5^2 \\
r - y &= (2^2 + 4^2 + 6^2) - (1^2 + 3^2 + 5^2) \\
&= (2^2 - 1^2) + (4^2 - 2^2) + (6^2 - 5^2) \\
&= 1 + 2 + 3 + 4 + 5 + 6 \\
&= \dfrac{6(1 + 6)}{2} \\
&= 21
\end{align*}
$$</p><p>Thus, we can return $\dfrac{k(1 + k)}{2}$ for arbitrary <em>even</em> $k$.</p><p>What about <em>odd</em> $k$? We can adjust the pairing a bit, and easily find that now we have $-\dfrac{k(1 + k)}{2}$.</p><h2 id=c-source-code>C++ Source Code</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>int</span> <span class=nf>appleBoxes</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>sum</span> <span class=o>=</span>  <span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=n>k</span><span class=p>)</span> <span class=o>*</span> <span class=n>k</span> <span class=o>/</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span><span class=n>k</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>1</span><span class=p>)</span> <span class=o>?</span> <span class=o>-</span><span class=nl>sum</span> <span class=p>:</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><footer><p id=cc>This work is licensed under
<a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0
<img alt="Creative Commons License CC BY-SA 4.0" src=/images/cc-all.svg style=height:1.2em;width:auto loading=lazy width=29.633333 height=10.583333></a></p></footer></article></main><footer><nav><a href=https://gohugo.io/>This blog is Powered by Hugo</a>
<a class="icon-prefix rss" href=/index.xml class=social-rss>RSS</a>
<a class="icon-prefix brand-github" href=https://github.com/PowerSnail/>Github</a>
<a class="icon-prefix mail" href=mailto:hj@powersnail.com>hj@powersnail.com</a></nav><div>Copyright @ PowerSnail 2016-2022</div></footer></body></html>