<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.8.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://snailshell.goatcounter.com/count https://mirrors.creativecommons.org/; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'">
    <meta name="author" content="PowerSnail">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#af3000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="theme-color" content="#1C4652">
    <title>
      A Constant Solution to Code-Fights Apple Boxes Problem · SnailShell
    </title>
    <link rel="prefetch" href="/images/front-cover.webp" as="image" crossorigin="">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="canonical" href="https://powersnail.com/2017/apple-box/">
    <script type="text/javascript" id="MathJax-script" src="/js/bundle.cc6d92b034817d3a3e6e3835b40e09bd99b88fcbe2b160a0dd4220b82b21c3cc.js" defer></script>
  </head>
  <body>
    <header>
      <a href="/">SnailShell</a>
      <nav>
        <a type="button" href="/posts/">Posts</a> <a type="button" href="/status/">Status</a> <a type="button" href="/about/">About</a>
      </nav>
    </header><img class="goatcounter" alt="" width="1" height="1" src="https://snailshell.goatcounter.com/count?p=%2f2017%2fapple-box%2f&amp;t=A%20Constant%20Solution%20to%20Code-Fights%20Apple%20Boxes%20Problem">
    <main>
      <article>
        <h1>
          A Constant Solution to Code-Fights Apple Boxes Problem
        </h1>
        <hr>
        <div id="metadata">
          <span class="icon-prefix calendar-event">2017-01-06</span> <span class="icon-prefix calculator">302 words</span> <span class="icon-prefix clock">2 minutes read</span>
        </div>
        <h2 id="the-apple-boxes-problem">
          The Apple Boxes Problem
        </h2>
        <p>
          The problem can be simply put:
        </p>
        <blockquote>
          <p>
            Input: $k$
          </p>
          <p>
            Output: let $r$ be the sum of the square of each <em>even</em> integer no larger than $k$, and $y$ be that of the <em>odd</em>. Return $r - y$.
          </p>
        </blockquote>
        <h2 id="the-naive-solution">
          The Naive Solution
        </h2>
        <p>
          We can loop through 1 to $k$, alternating between adding and subtracting.
        </p>
        <div class="highlight">
          <pre class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">1.</span><span class="o">.</span><span class="n">k</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">        <span class="n">val</span> <span class="o">+=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="n">val</span> <span class="o">-=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">return</span> <span class="n">val</span></span></span></code></pre>
        </div>
        <p>
          There could be various optimizations, but nevertheless, the algorithm is linear with regard to $k$.
        </p>
        <h2 id="constant-solution">
          Constant Solution
        </h2>
        <p>
          First, assume $k$ is even, so that we can perfectly pair up terms in $r$ and $y$. Observe that each pair is in the form of $x^2 - (x - 1)^2$. This can be transformed to $(x + x - 1)\cdot(x - x + 1) = (x - 1) + x$. When we add all pairs, it becomes a simple series: $1 + 2 + 3 + … + k$. For example, for $k = 6$:
        </p>
        <p>
          $$ \begin{align*} r &amp;= 2^2 + 4^2 + 6^2 \\ y &amp;= 1^2 + 3^2 + 5^2 \\ r - y &amp;= (2^2 + 4^2 + 6^2) - (1^2 + 3^2 + 5^2) \\ &amp;= (2^2 - 1^2) + (4^2 - 2^2) + (6^2 - 5^2) \\ &amp;= 1 + 2 + 3 + 4 + 5 + 6 \\ &amp;= \dfrac{6(1 + 6)}{2} \\ &amp;= 21 \end{align*} $$
        </p>
        <p>
          Thus, we can return $\dfrac{k(1 + k)}{2}$ for arbitrary <em>even</em> $k$.
        </p>
        <p>
          What about <em>odd</em> $k$? We can adjust the pairing a bit, and easily find that now we have $-\dfrac{k(1 + k)}{2}$.
        </p>
        <h2 id="c-source-code">
          C++ Source Code
        </h2>
        <div class="highlight">
          <pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">appleBoxes</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span>  <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">k</span><span class="p">)</span> <span class="o">*</span> <span class="n">k</span> <span class="o">/</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">k</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="nl">sum</span> <span class="p">:</span> <span class="n">sum</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre>
        </div>
        <div>
          <a class="tag" href="/tags/computer-science">computer science</a> <a class="tag" href="/tags/algorithm">algorithm</a> <a class="tag" href="/tags/codefights">codefights</a> <a class="tag" href="/tags/c++">C++</a>
        </div>
        <footer>
          <p id="cc">
            This work is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-SA 4.0 <img alt="Creative Commons License CC BY-SA 4.0" src="/images/cc-all.svg" style="height:1.4em; width: auto;" loading="lazy" width="30" height="11"></a>
          </p>
        </footer>
      </article>
    </main>
    <footer>
      <nav>
        <a class="icon-prefix rss" href="/index.xml">RSS</a> <a class="icon-prefix brand-github" href="https://github.com/PowerSnail/">Github</a> <a class="icon-prefix mail" href="mailto:hj@powersnail.com">hj@powersnail.com</a>
      </nav>
      <div>
        © PowerSnail 2017
      </div>
    </footer>
  </body>
</html>
