<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=content-security-policy content="default-src 'self'; img-src 'self' https://snailshell.goatcounter.com/count https://mirrors.creativecommons.org/; style-src 'self' 'unsafe-inline'"><meta http-equiv=content-type content="text/html;charset=utf-8;x-content-type-options=nosniff"><meta name=author content="PowerSnail"><meta name=generator content="Hugo 0.101.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#af3000><meta name=msapplication-TileColor content="#000000"><meta name=theme-color content="#af3000"><title>Theme-less Hugo, Almost Pure HTML, Styled with MVP CSS Â· SnailShell</title><link rel=stylesheet href=https://powersnail.com/style.css><link rel=canonical href=https://powersnail.com/2022/hugo-mvp-css/></head><body><header><div class=site-title><a href=https://powersnail.com/>SnailShell</a></div><nav><a type=button href=/posts/>Posts</a>
<a type=button href=/status/>Status</a>
<a type=button href=/about/>About</a></nav></header><img class=goatcounter alt width=1 height=1 src="https://snailshell.goatcounter.com/count?p=%2f2022%2fhugo-mvp-css%2f&t=Theme-less%20Hugo%2c%20Almost%20Pure%20HTML%2c%20Styled%20with%20MVP%20CSS"><main><article><header><h1>Theme-less Hugo, Almost Pure HTML, Styled with MVP CSS</h1><hr><div id=metadata><details><summary class="icon-prefix tags">Tags</summary><div class=tag-list><a class=tag href=/tags/computer-science>computer science</a> <a class=tag href=/tags/blog>blog</a> <a class=tag href=/tags/hugo>hugo</a> <a class=tag href=/tags/html>html</a></div></details><span class="icon-prefix calendar-event">2022-01-12</span>
<span class="icon-prefix calculator">832 words</span>
<span class="icon-prefix clock">4 minutes read</span></div></header><h2 id=theme-less-hugo>Theme-less Hugo</h2><p>As popular as theming is, I can&rsquo;t help but feel unsatisfied by a plug-and-use theme made by someone else. From WordPress to Jekyll to Hugo, no theme ever stopped me from tinkering with the underlying templates and CSS, during which, the theme inevitably becomes more coupled with my blog and content. This is because while the templates are usually generic enough for the body of blog articles, they are often quite specific on other elements: about, headers, footers, navigation bars, etc. And to customize those elements, I&rsquo;m practically re-writing the website.</p><p>When I started with Hugo, I chose the theme <a href=https://github.com/mavidser/hugo-rocinante>Rocinante</a>, for its clean appearance, and partially for its name, which comes from one of my favorite novels of all time. I forked the theme, and kept maintaining two repositories: the blog itself, and the theme. As more modifications were made, the two codebases tangled with each other so deeply, that I often wonder where I should put a certain element.</p><p>I decided to go theme-less, when the theme no longer bear any resemblance to the original Rocinante. There&rsquo;s no point in maintaining two sets of code if they cannot be decoupled.</p><p>Theme-less Hugo is easy: I just needed the templates, everything in the <code>layouts</code> directory, to scaffold the site. So, I copied the skeleton code&mdash;<code>layouts</code>, and <code>assets</code> for the styles&mdash;into my blog, and removed the <code>themes</code> directory.</p><p>In fact, I think if one has finished theme-shopping, and would like to start making customizations, the first thing to do is to copy the theme into their main project, and delete <code>themes</code>. It makes the website whole, the workflow more coherent, the workspace better organized, the commit history saner.</p><h2 id=semantic-html-and-mvpcss>Semantic HTML and MVP.CSS</h2><p>I have very little need for advanced topography or animations. My blog is just a bunch of static files hosted on GitHub Pages; nothing Fancy.</p><p>This is, therefore, a very suitable use case for a classless CSS framework like <a href=https://andybrewer.github.io/mvp/>MVP.CSS</a>. Overall, I think MVP does a fantastic job.</p><p>A few things that I don&rsquo;t like about it:</p><ol><li><p>Block quotes. MVP centers and enlarges the text in block quote, as if I&rsquo;m hanging an inspirational epigram on the wall, which doesn&rsquo;t fit the semantic role of block quotes. It&rsquo;s simply a quotation that occupies a paragraph; it&rsquo;s part of my content, a link in the linear chain of words, not a flyout or illustration. MVP already has <code>&lt;section>&lt;aside></code> to deal with that.</p></li><li><p>Links without underlines. This makes the website less accessible to color-blind readers, or anyone who reads on a monochrome monitor.</p></li><li><p>Alternating table row colors. Not a fault of MVP. This is merely a pet peeve of mine.</p></li></ol><p>With regard to code blocks, Hugo defaults to rendering code highlighting with inline style of fixed colors, which is awkward when MVP can react to system-wise dark theme. So, I configured Hugo to output code blocks with CSS classes, and output two themes, <code>friendly</code> and <code>dracula</code>, for light and dark themes respectively.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># To generate the CSS files</span>
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>friendly &gt; assets/css/_friendly.css
</span></span><span class=line><span class=cl>hugo gen chromastyles --style<span class=o>=</span>dracula &gt; assets/css/_dracula.css</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-scss data-lang=scss><span class=line><span class=cl><span class=c1>// style.scss
</span></span></span><span class=line><span class=cl><span class=c1>// To include both themes
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>@import</span> <span class=s2>&#34;friendly&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>@media</span> <span class=p>(</span><span class=n>prefers-color-scheme</span><span class=o>:</span> <span class=ni>dark</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>@import</span> <span class=s2>&#34;dracula&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># config.toml</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>markup</span><span class=p>]</span>
</span></span><span class=line><span class=cl>  <span class=p>[</span><span class=nx>markup</span><span class=p>.</span><span class=nx>highlight</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nx>noClasses</span> <span class=p>=</span> <span class=kc>false</span></span></span></code></pre></td></tr></table></div></div><p>I then colored the website with a dark banner image of Bach&rsquo;s manuscript, and a color scheme generated from a picture of a violin. To ensure that the colors have enough contrast, I generated them with <a href=https://bottosson.github.io/posts/oklab/>Oklab</a> color space, and it seems to be passing accessibility tests so far. It might be a total overkill though, since a few colors on the spectrum are used. But what is a personal project without a few overkills?</p><h2 id=mathjax-and-a-little-grievance-of-hugo>MathJax, and a Little Grievance of Hugo</h2><p>The only JavaScript I use is <a href=https://www.mathjax.org/>MathJax</a>. I&rsquo;ve been considering to use its server-side rendering, but it seems that at the moment of writing this blog, Hugo does not support its use.</p><p>In fact, Hugo does not support running its output HTML through an arbitrary command, and I think it&rsquo;s a shame. There is a limit to what the <code>replace</code> and <code>replaceRE</code> could accomplish, which can be supplemented by custom filters written by other users.</p><p>For instance, math equations can be easily rendered with LaTeX and converted to SVG. This will enable the embedding of arbitrary Tex elements, not just what MathJax supports, and at the same time, eliminates the need to bundle a JS library for client-side rendering.</p><p>One thing that I can do is to add an extra step to <code>hugo build</code>, and iterate through all the output HTML with whatever post-processing I want. But I do hope that this could be integrated into Hugo, so I don&rsquo;t have to further butcher the GitHub Action file.</p><h2 id=final-thoughts>Final Thoughts</h2><p>You can find all the code to my blog <a href=https://github.com/PowerSnail/PowerSnail.github.io>here</a>. My modifications to the theme, up to the point that I moved everything into the main repository, can be found <a href=https://github.com/PowerSnail/hugo-rocinante>here</a>.</p><footer><p id=cc>This work is licensed under
<a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0
<img alt="Creative Commons License CC BY-SA 4.0" src=/images/cc-all.svg style=height:1.2em;width:auto loading=lazy width=29.633333 height=10.583333></a></p></footer></article></main><footer><nav><a href=https://gohugo.io/>This blog is Powered by Hugo</a>
<a class="icon-prefix rss" href=/index.xml class=social-rss>RSS</a>
<a class="icon-prefix brand-github" href=https://github.com/PowerSnail/>Github</a>
<a class="icon-prefix mail" href=mailto:hj@powersnail.com>hj@powersnail.com</a></nav><div>Copyright @ PowerSnail 2016-2022</div></footer></body></html>