(()=>{class t{constructor(){this.points=new Map}add(t){let e=i(this.points,t.x,(()=>new Set));return!e.has(t.y)&&(e.add(t.y),!0)}has(t){let e=this.points.get(t.x);return void 0!==e&&e.has(t.y)}count(){let t=0;for(const e of this.points.values())t+=e.size;return t}*[Symbol.iterator](){for(const[t,e]of this.points.entries())for(const i of e)yield{x:t,y:i}}}function*e(t,e){yield{x:(e.x-1+t.width)%t.width,y:(e.y-1+t.height)%t.height},yield{x:(e.x-1+t.width)%t.width,y:(e.y+t.height)%t.height},yield{x:(e.x-1+t.width)%t.width,y:(e.y+1+t.height)%t.height},yield{x:(e.x+t.width)%t.width,y:(e.y-1+t.height)%t.height},yield{x:(e.x+t.width)%t.width,y:(e.y+1+t.height)%t.height},yield{x:(e.x+1+t.width)%t.width,y:(e.y-1+t.height)%t.height},yield{x:(e.x+1+t.width)%t.width,y:(e.y+t.height)%t.height},yield{x:(e.x+1+t.width)%t.width,y:(e.y+1+t.height)%t.height}}function i(t,e,i){let h=t.get(e);if(void 0===h){let h=i();return t.set(e,h),h}return h}function h(t,e){let i=window.devicePixelRatio||1,h=e.getBoundingClientRect(),n=e.getContext("2d");e.width=h.width*i,e.height=h.height*i;let l=(e.width-20)/t.width;n.imageSmoothingEnabled=!1,n.clearRect(0,0,e.width,e.height),n.fillStyle="#eee",n.fillRect(0,0,e.width,e.height),n.strokeStyle="#fff";for(let e=0;e<t.width;e+=1)for(let i=0;i<t.height;i+=1)t.alive.has({x:e,y:i})?n.fillStyle="#333":n.fillStyle="#ccc",n.fillRect(e*l+10,i*l+10,l-1,l-1);if(0==t.alive.count())return n.fillStyle="#00000044",void n.fillRect(0,0,n.canvas.width,n.canvas.height)}function n(){let n=document.getElementById("mainCanvas"),l=function(e,i,h){let n=new t;for(let t=0;t<e;t++)for(;!n.add({x:Math.floor(Math.random()*i),y:Math.floor(Math.random()*h)}););return{alive:n,width:i,height:h}}(1e4/3,100,100);h(l,n);let o=0;o=setInterval((function(){l=function(h){let n=new Map;for(const t of h.alive)for(const l of e(h,t)){let t=i(n,l.x,(()=>new Map)),e=i(t,l.y,(()=>0));t.set(l.y,e+1)}let l=new t;for(const[t,e]of n.entries())for(const[i,n]of e)(3==n||2==n&&h.alive.has({x:t,y:i}))&&l.add({x:t,y:i});return{alive:l,width:h.width,height:h.height}}(l),h(l,n),0==l.alive.count()&&clearInterval(o)}),100)}window.addEventListener("load",(function(){n()}))})();
//# sourceMappingURL=game_of_life.js.map
